
# שיפור ולידציית מספר טלפון בדף ההתחברות

## סיכום
שיפור דף הלוגין כך שמשתמשים יוכלו להזין מספר טלפון בפורמט ישראלי רגיל (0547667009), עם ולידציה מלאה והמרה אוטומטית לפורמט בינלאומי מאחורי הקלעים.

---

## שינויים נדרשים

### 1. ולידציית מספר טלפון

**כללי הולידציה:**
- מספר חייב להתחיל ב-`05`
- מספר חייב להכיל בדיוק 10 ספרות
- דוגמה תקינה: `0547667009`

**הודעות שגיאה בעברית:**
- "מספר הטלפון חייב להתחיל ב-05"
- "מספר הטלפון חייב להכיל 10 ספרות"

### 2. המרה אוטומטית לפורמט בינלאומי

כאשר שולחים ל-Supabase:
```text
קלט משתמש: 0547667009
שליחה ל-API: +972547667009
```

הלוגיקה: החלף את ה-`0` הראשון ב-`+972`

### 3. שיפורי UI

- **Placeholder** ברור יותר: `0501234567`
- **הודעות שגיאה** מוצגות מתחת לשדה הקלט
- **השבתת כפתור** כשהמספר לא תקין

---

## פרטים טכניים

### קובץ לעריכה
`src/pages/Login.tsx`

### פונקציות חדשות

```text
validatePhoneNumber(phone: string):
  - הסר תווים שאינם ספרות
  - בדוק שמתחיל ב-05
  - בדוק שיש בדיוק 10 ספרות
  - החזר { isValid: boolean, error?: string }

formatToInternational(phone: string):
  - קלט: 0547667009
  - פלט: +972547667009
```

### State חדש
```text
phoneError: string | null - הודעת שגיאה להצגה
```

### שינויים ב-UI
1. הוספת הודעת שגיאה מתחת לשדה הטלפון
2. עדכון ה-placeholder ל-`0501234567`
3. הכפתור מושבת אם יש שגיאת ולידציה
4. ולידציה בזמן אמת בעת הקלדה (עם debounce)

---

## זרימת המשתמש

```text
1. משתמש מקליד: 0547667009
2. ולידציה בזמן אמת מוודאת:
   ✓ מתחיל ב-05
   ✓ 10 ספרות בדיוק
3. משתמש לוחץ "שלח קוד אימות"
4. מאחורי הקלעים: 0547667009 → +972547667009
5. Supabase מקבל את המספר בפורמט בינלאומי
```

---

## הערה חשובה

לפני שהשינויים יעבדו, יש להגדיר ספק SMS ב-Supabase Dashboard:
1. Authentication > Providers > Phone
2. Enable Phone provider
3. הגדר Twilio/MessageBird/Vonage

